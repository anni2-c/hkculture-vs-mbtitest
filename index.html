<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>È¶ôÊ∏ØÊñáÂåñ √ó MBTI ÊÄßÊ†ºÊ∏¨Ë©¶</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Noto Sans HK', sans-serif;
            background-color: #ffecec;
            position: relative;
            overflow-x: hidden;
        }
        
        /* Hong Kong cultural background elements */
        .hk-bg-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        
        .hk-element {
            position: absolute;
            opacity: 0.15; /* Increased opacity from 0.07 */
        }
        
        .quiz-container {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.2);
            position: relative;
            z-index: 1;
        }
        
        .option-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .option-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.2);
            border-color: #ff6b6b;
        }
        
        .option-card.selected {
            border-color: #ff6b6b;
            background-color: #fff0f0;
        }
        
        .progress-bar {
            height: 10px;
            border-radius: 5px;
            background-color: #ffe0e0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: #ff6b6b;
            transition: width 0.5s ease;
        }
        
        .btn-primary {
            background-color: #ff6b6b;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background-color: #ff5252;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }
        
        .result-card {
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.2);
            transition: all 0.3s ease;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(255, 107, 107, 0.3);
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #ff6b6b;
            opacity: 0;
        }
        
        .share-btn {
            transition: all 0.3s ease;
        }
        
        .share-btn:hover {
            transform: translateY(-2px);
        }
        
        .tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s;
            white-space: nowrap;
            margin-bottom: 8px;
            pointer-events: none;
        }
        
        .tooltip:after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }

        /* Hide the forms initially */
        #hidden-form, #google-form {
            display: none;
        }
    </style>
</head>
<body class="min-h-screen py-8 px-4">
    <!-- Hong Kong Cultural Background Elements -->
    <div class="hk-bg-elements">
        <!-- Traditional Chinese Gate -->
        <svg class="hk-element" style="top: 5%; left: 5%; width: 180px;" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10,90 L10,40 L90,40 L90,90" stroke="#ff6b6b" stroke-width="3"/>
            <path d="M5,40 L95,40" stroke="#ff6b6b" stroke-width="3"/>
            <path d="M15,40 L15,30 L85,30 L85,40" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M20,30 L20,20 L80,20 L80,30" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M25,20 L25,10 L75,10 L75,20" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M40,90 L40,50" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M60,90 L60,50" stroke="#ff6b6b" stroke-width="2"/>
        </svg>
        
        <!-- Dragon Boat -->
        <svg class="hk-element" style="top: 70%; left: 80%; width: 200px;" viewBox="0 0 100 30" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5,15 C15,5 85,5 95,15" stroke="#ff6b6b" stroke-width="2" fill="none"/>
            <path d="M5,15 C15,25 85,25 95,15" stroke="#ff6b6b" stroke-width="2" fill="none"/>
            <path d="M95,15 L100,10" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M95,15 L100,20" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M5,15 L0,10" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M5,15 L0,20" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M20,15 L20,5" stroke="#ff6b6b" stroke-width="1"/>
            <path d="M40,15 L40,5" stroke="#ff6b6b" stroke-width="1"/>
            <path d="M60,15 L60,5" stroke="#ff6b6b" stroke-width="1"/>
            <path d="M80,15 L80,5" stroke="#ff6b6b" stroke-width="1"/>
        </svg>
        
        <!-- Dim Sum -->
        <svg class="hk-element" style="top: 30%; left: 85%; width: 100px;" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="50" cy="50" r="30" stroke="#ff6b6b" stroke-width="2"/>
            <circle cx="50" cy="50" r="25" stroke="#ff6b6b" stroke-width="1"/>
            <path d="M35,40 L65,40" stroke="#ff6b6b" stroke-width="1"/>
            <path d="M35,50 L65,50" stroke="#ff6b6b" stroke-width="1"/>
            <path d="M35,60 L65,60" stroke="#ff6b6b" stroke-width="1"/>
            <path d="M50,20 L50,10" stroke="#ff6b6b" stroke-width="2"/>
        </svg>
        
        <!-- Lion Dance Head -->
        <svg class="hk-element" style="top: 15%; left: 75%; width: 150px;" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20,80 C20,50 80,50 80,80" stroke="#ff6b6b" stroke-width="3" fill="none"/>
            <path d="M20,80 L80,80" stroke="#ff6b6b" stroke-width="3"/>
            <path d="M30,50 C30,30 70,30 70,50" stroke="#ff6b6b" stroke-width="3" fill="none"/>
            <circle cx="40" cy="40" r="5" stroke="#ff6b6b" stroke-width="2"/>
            <circle cx="60" cy="40" r="5" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M50,50 L50,60" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M40,65 C40,70 60,70 60,65" stroke="#ff6b6b" stroke-width="2" fill="none"/>
        </svg>
        
        <!-- Hong Kong Skyline -->
        <svg class="hk-element" style="bottom: 5%; left: 0; width: 100%;" viewBox="0 0 800 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0,100 L0,70 L20,70 L20,40 L40,40 L40,60 L50,60 L50,30 L60,30 L60,50 L80,50 L80,20 L100,20 L100,60 L120,60 L120,40 L140,40 L140,70 L160,70 L160,50 L180,50 L180,30 L200,30 L200,60 L220,60 L220,40 L240,40 L240,20 L260,20 L260,50 L280,50 L280,70 L300,70 L300,40 L320,40 L320,60 L340,60 L340,30 L360,30 L360,50 L380,50 L380,20 L400,20 L400,10 L420,10 L420,40 L440,40 L440,60 L460,60 L460,30 L480,30 L480,50 L500,50 L500,20 L520,20 L520,60 L540,60 L540,40 L560,40 L560,70 L580,70 L580,50 L600,50 L600,30 L620,30 L620,60 L640,60 L640,40 L660,40 L660,20 L680,20 L680,50 L700,50 L700,70 L720,70 L720,40 L740,40 L740,60 L760,60 L760,30 L780,30 L780,50 L800,50 L800,100 Z" stroke="#ff6b6b" stroke-width="2" fill="none"/>
        </svg>
        
        <!-- Bauhinia Flower (Hong Kong Emblem) -->
        <svg class="hk-element" style="top: 60%; left: 10%; width: 120px;" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M50,10 C60,30 80,40 90,50 C80,60 60,70 50,90 C40,70 20,60 10,50 C20,40 40,30 50,10 Z" stroke="#ff6b6b" stroke-width="2" fill="none"/>
            <path d="M50,20 C57,35 73,42 80,50 C73,58 57,65 50,80 C43,65 27,58 20,50 C27,42 43,35 50,20 Z" stroke="#ff6b6b" stroke-width="1" fill="none"/>
            <circle cx="50" cy="50" r="5" stroke="#ff6b6b" stroke-width="1"/>
        </svg>
        
        <!-- Chinese Lantern -->
        <svg class="hk-element" style="top: 20%; left: 20%; width: 80px;" viewBox="0 0 60 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M30,10 L30,20" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M20,20 C20,20 30,15 40,20" stroke="#ff6b6b" stroke-width="2" fill="none"/>
            <path d="M15,20 C15,50 15,70 15,80" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M45,20 C45,50 45,70 45,80" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M15,20 C15,20 30,25 45,20" stroke="#ff6b6b" stroke-width="2" fill="none"/>
            <path d="M15,40 C15,40 30,45 45,40" stroke="#ff6b6b" stroke-width="1" fill="none"/>
            <path d="M15,60 C15,60 30,65 45,60" stroke="#ff6b6b" stroke-width="1" fill="none"/>
            <path d="M15,80 C15,80 30,85 45,80" stroke="#ff6b6b" stroke-width="2" fill="none"/>
            <path d="M30,80 L30,90" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M25,90 L35,90" stroke="#ff6b6b" stroke-width="2"/>
        </svg>
        
        <!-- Junk Boat -->
        <svg class="hk-element" style="top: 40%; left: 40%; width: 150px;" viewBox="0 0 100 60" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10,40 L90,40" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M20,40 L20,20" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M20,20 L50,10" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M50,10 L50,40" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M20,20 L20,10 L50,10" stroke="#ff6b6b" stroke-width="1"/>
            <path d="M10,40 C10,40 20,50 50,50 C80,50 90,40 90,40" stroke="#ff6b6b" stroke-width="2" fill="none"/>
            <path d="M50,10 L80,20" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M80,20 L80,40" stroke="#ff6b6b" stroke-width="2"/>
        </svg>
        
        <!-- NEW: Tram -->
        <svg class="hk-element" style="top: 25%; left: 60%; width: 120px;" viewBox="0 0 100 120" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="20" y="20" width="60" height="80" stroke="#ff6b6b" stroke-width="2"/>
            <rect x="25" y="30" width="50" height="15" stroke="#ff6b6b" stroke-width="1"/>
            <rect x="25" y="50" width="50" height="15" stroke="#ff6b6b" stroke-width="1"/>
            <rect x="25" y="70" width="50" height="15" stroke="#ff6b6b" stroke-width="1"/>
            <circle cx="30" cy="105" r="5" stroke="#ff6b6b" stroke-width="1"/>
            <circle cx="70" cy="105" r="5" stroke="#ff6b6b" stroke-width="1"/>
            <path d="M20,100 L80,100" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M40,10 L60,10 L60,20 L40,20 Z" stroke="#ff6b6b" stroke-width="1"/>
        </svg>
        
        <!-- NEW: Egg Waffle -->
        <svg class="hk-element" style="top: 65%; left: 25%; width: 100px;" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20,20 C20,20 50,80 80,20" stroke="#ff6b6b" stroke-width="2" fill="none"/>
            <circle cx="30" cy="30" r="8" stroke="#ff6b6b" stroke-width="1"/>
            <circle cx="50" cy="30" r="8" stroke="#ff6b6b" stroke-width="1"/>
            <circle cx="70" cy="30" r="8" stroke="#ff6b6b" stroke-width="1"/>
            <circle cx="40" cy="45" r="8" stroke="#ff6b6b" stroke-width="1"/>
            <circle cx="60" cy="45" r="8" stroke="#ff6b6b" stroke-width="1"/>
            <circle cx="30" cy="60" r="8" stroke="#ff6b6b" stroke-width="1"/>
            <circle cx="50" cy="60" r="8" stroke="#ff6b6b" stroke-width="1"/>
            <circle cx="70" cy="60" r="8" stroke="#ff6b6b" stroke-width="1"/>
        </svg>
        
        <!-- NEW: Milk Tea -->
        <svg class="hk-element" style="top: 50%; left: 75%; width: 80px;" viewBox="0 0 60 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15,30 L15,90 C15,95 45,95 45,90 L45,30" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M10,30 L50,30" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M20,30 L20,15 C20,10 40,10 40,15 L40,30" stroke="#ff6b6b" stroke-width="1"/>
            <path d="M15,50 L45,50" stroke="#ff6b6b" stroke-width="1" stroke-dasharray="2,2"/>
            <path d="M25,20 L35,20" stroke="#ff6b6b" stroke-width="1"/>
        </svg>
        
        <!-- NEW: Temple -->
        <svg class="hk-element" style="top: 10%; left: 40%; width: 150px;" viewBox="0 0 120 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20,90 L100,90" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M30,90 L30,60" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M90,90 L90,60" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M30,60 L90,60" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M40,60 L40,40" stroke="#ff6b6b" stroke-width="1"/>
            <path d="M60,60 L60,40" stroke="#ff6b6b" stroke-width="1"/>
            <path d="M80,60 L80,40" stroke="#ff6b6b" stroke-width="1"/>
            <path d="M20,40 L100,40" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M60,10 L20,40" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M60,10 L100,40" stroke="#ff6b6b" stroke-width="2"/>
            <path d="M50,30 L70,30" stroke="#ff6b6b" stroke-width="1"/>
        </svg>
    </div>

    <!-- Hidden form for FormSubmit -->
    <form id="hidden-form" action="https://formsubmit.co/annihu@vtc.edu.hk" method="POST" target="_self">
        <input type="hidden" name="_subject" value="È¶ôÊ∏ØÊñáÂåñ MBTI Ê∏¨Ë©¶ÁµêÊûú">
        <input type="hidden" name="_next" value="">
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="program" id="form-program" value="">
        <input type="hidden" name="mbti_type" id="form-mbti" value="">
        <input type="hidden" name="timestamp" id="form-timestamp" value="">
    </form>

	<script>
		document.getElementById('hidden-form').addEventListener('submit', function(e) {
			e.preventDefault(); // ÈòªÊ≠¢ÈªòËÆ§Ë°®ÂçïÊèê‰∫§Ë°å‰∏∫
			const formData = new FormData(this);
			fetch(this.action, {
				method: 'POST',
				body: formData
			}).then(response => {
				if (!response.ok) {
					throw new Error('Form submission failed with status: ' + response.status);
				}
				return response.json(); // Â¶ÇÊûúÈúÄË¶ÅÂ§ÑÁêÜËøîÂõûÁöÑÊï∞ÊçÆÔºåÂàôËß£Êûê‰∏∫ JSON
			}).then(data => {
				console.log('Form submitted successfully:', data);
        // Âú®Ê≠§Â§ÑÊ∑ªÂä†ÁªìÊûúÊèêÁ§∫ÈÄªËæëÔºå‰æãÂ¶ÇÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØÊàñÊõ¥Êñ∞È°µÈù¢ÂÜÖÂÆπ
			}).catch(error => {
				console.error('Error submitting form:', error);
				alert('Ë°®ÂçïÊèê‰∫§Â§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï„ÄÇ');
			});
		});
	</script>



    <!-- Hidden form for Google Form -->
    <form id="google-form" action="https://docs.google.com/forms/d/e/1FAIpQLSeDSTy5CNytRWlAjzfXi2X0W_uhRsFnyWxE--g26sFXMnoCXw/formResponse" method="POST">
        <input type="hidden" name="entry.573486325" id="google-form-program" value="">
        <input type="hidden" name="entry.375727484" id="google-form-mbti" value="">
        <input type="hidden" name="entry.1263229797" id="google-form-timestamp" value="">
    </form>

    <div class="max-w-3xl mx-auto quiz-container p-6 md:p-8">
        <!-- Title Section -->
        <div id="title-section" class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-black text-red-500 mb-2">È¶ôÊ∏ØÊñáÂåñ √ó MBTI ÊÄßÊ†ºÊ∏¨Ë©¶</h1>
            <h2 class="text-xl md:text-2xl font-bold text-red-400 mb-6">Ê∏¨Ë©¶‰Ω†ÈÅ©ÂêàÂì™Á®ÆÈ¶ôÊ∏ØÂÇ≥Áµ±ÊñáÂåñÊ¥ªÂãïÔºü</h2>
            <p class="text-gray-600 mb-8">ÈÄèÈÅé 5 ÈÅìÊÉÖÂ¢ÉÈ°åÔºåÁôºÊéòÊúÄÈÅ©Âêà‰Ω†ÊÄßÊ†ºÁöÑÈ¶ôÊ∏ØÂÇ≥Áµ±ÊñáÂåñÈ´îÈ©óÔºÅ</p>
            <button id="start-btn" class="btn-primary text-white font-bold py-3 px-8 rounded-full text-lg">ÈñãÂßãÊ∏¨Ë©¶</button>
        </div>

        <!-- Quiz Section -->
        <div id="quiz-section" class="hidden">
            <div class="mb-6">
                <div class="flex justify-between text-sm text-gray-600 mb-2">
                    <span id="question-number">ÂïèÈ°å 1/6</span>
                    <span id="progress-text">16.7%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress" style="width: 16.7%"></div>
                </div>
            </div>

            <div id="question-container" class="mb-8">
                <h3 id="question-text" class="text-xl md:text-2xl font-bold text-gray-800 mb-6"></h3>
                <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            </div>

            <div class="flex justify-between">
                <button id="prev-btn" class="hidden text-red-500 font-medium py-2 px-4 rounded-lg border border-red-300 hover:bg-red-50">‰∏ä‰∏ÄÈ°å</button>
                <button id="next-btn" class="btn-primary text-white font-bold py-2 px-6 rounded-lg ml-auto">‰∏ã‰∏ÄÈ°å</button>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results-section" class="hidden">
            <h2 class="text-2xl md:text-3xl font-bold text-red-500 mb-2 text-center">‰Ω†ÁöÑÊ∏¨Ë©¶ÁµêÊûú</h2>
            <p class="text-center text-gray-500 mb-6">Ê∏¨Ë©¶ÁµêÊûúÂè™‰æõÂèÉËÄÉ</p>
            
            <div class="result-card bg-white p-6 mb-8">
                <div class="flex flex-col md:flex-row items-center mb-6">
                    <div class="bg-red-100 rounded-full p-4 mb-4 md:mb-0 md:mr-6">
                        <div id="result-icon" class="text-4xl"></div>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-800" id="mbti-type"></h3>
                        <p class="text-lg font-medium text-red-500" id="mbti-name"></p>
                    </div>
                </div>
                
                <div class="mb-6">
                    <h4 class="font-bold text-gray-700 mb-2">‰Ω†ÁöÑÊÄßÊ†ºÁâπË≥™Ôºö</h4>
                    <p id="mbti-description" class="text-gray-600"></p>
                </div>
                
                <div>
                    <h4 class="font-bold text-gray-700 mb-2">ÊúÄÈÅ©Âêà‰Ω†ÁöÑÈ¶ôÊ∏ØÂÇ≥Áµ±ÊñáÂåñÈ´îÈ©óÔºö</h4>
                    <div class="bg-red-50 p-4 rounded-lg">
                        <h5 id="culture-name" class="font-bold text-red-600 mb-2"></h5>
                        <p id="culture-description" class="text-gray-600"></p>
                    </div>
                </div>
            </div>
            
            <div class="text-center relative">
                <button id="restart-btn" class="btn-primary text-white font-bold py-3 px-8 rounded-full text-lg mb-6">ÈáçÊñ∞Ê∏¨Ë©¶</button>
                
                <div class="relative inline-block">
                    <button id="share-btn" class="flex items-center justify-center bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-full text-lg share-btn">
                        <i class="fas fa-share-alt mr-2"></i> ÂàÜ‰∫´ÁµêÊûú
                    </button>
                    <div id="copy-tooltip" class="tooltip">Â∑≤Ë§áË£ΩÁ∂≤ÂùÄÔºÅ</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // MBTI Data
        const mbtiData = {
            "ENFJ": {
                name: "Â∞éÂ∏´",
                description: "‰Ω†ÊìÅÊúâÂº∑Â§ßÁöÑÈ†òÂ∞éÂäõÂíåÊøÄÂãµ‰ªñ‰∫∫ÁöÑËÉΩÂäõÔºåÂñÑÊñºÂπ´Âä©‰ªñ‰∫∫ÁôºÊèÆÊΩõËÉΩ„ÄÇ",
                culture: "ÁõÇËò≠ÂãùÊúÉÁ¶èÁâ©Á´∂Êäï",
                cultureDesc: "ÁõÇËò≠ÂãùÊúÉ‰∏≠ÁöÑÁ¶èÁâ©Á´∂ÊäïÊ¥ªÂãïÈúÄË¶ÅÈ†òÂ∞éÂäõÂíåÊøÄÂãµ‰ªñ‰∫∫ÁöÑËÉΩÂäõÔºå‰Ω†ÂèØ‰ª•ÁµÑÁπîÂúòÈöäÂèÉËàáÁ´∂ÊäïÔºåÁÇ∫Á§æÂçÄÂ∏∂‰æÜÁ•ùÁ¶è„ÄÇ",
                icon: "üëë"
            },
            "ENFP": {
                name: "Ê¥ªÂãïÂÆ∂",
                description: "‰Ω†ÂâµÊÑèÂ•îÊîæÔºåÁÜ±ÊÑõÁ§æ‰∫§ÔºåÁ∏ΩËÉΩÁÇ∫Âë®ÂúçÁöÑ‰∫∫Â∏∂‰æÜÊ≠°Ê®ÇÂíåÊñ∞ÈÆÆÊÑü„ÄÇ",
                culture: "Èï∑Ê¥≤Â§™Âπ≥Ê∏ÖÈÜÆÔºàÈ£ÑËâ≤Ôºâ",
                cultureDesc: "Èï∑Ê¥≤Â§™Âπ≥Ê∏ÖÈÜÆÁöÑÈ£ÑËâ≤Ê¥ªÂãïÂÖÖÊªøÂâµÊÑèÂíåË°®ÊºîÂÖÉÁ¥†Ôºå‰Ω†ÁöÑÊ¥ªÂäõÂíåÂâµÊÑèÊÄùÁ∂≠Âú®ÈÄôË£°ÂèØ‰ª•ÂæóÂà∞ÂÖÖÂàÜÁôºÊèÆ„ÄÇ",
                icon: "üé≠"
            },
            "ENTJ": {
                name: "ÊåáÊèÆÂÆò",
                description: "‰Ω†ÊûúÊñ∑Â†ÖÂÆöÔºåÊìÖÈï∑Âà∂ÂÆöÁ≠ñÁï•ÔºåÂ§©ÁîüÁöÑÈ†òÂ∞éËÄÖ„ÄÇ",
                culture: "Ë©†Êò•Ê≠¶Ë°ì",
                cultureDesc: "Ë©†Êò•Ê≠¶Ë°ìÈúÄË¶ÅÂ†ÖÂÆöÁöÑÊÑèÂøóÂíåÁ≠ñÁï•ÊÄùÁ∂≠Ôºå‰Ω†ÁöÑÊûúÊñ∑ÊÄßÊ†ºÂíåÈ†òÂ∞éËÉΩÂäõ‰Ωø‰Ω†ËÉΩÂ§†Âú®ÈÄôÈñÄÊ≠¶Ë°ì‰∏≠ÊúâÂá∫Ëâ≤Ë°®Áèæ„ÄÇ",
                icon: "‚öîÔ∏è"
            },
            "ENTP": {
                name: "ËæØË´ñÂÆ∂",
                description: "‰Ω†ÂÖÖÊªøÂ•ΩÂ•áÂøÉÔºåÂñúÊ≠°ÊåëÊà∞Â∏∏Ë¶èÔºåÂñÑÊñºËæØË´ñÂíåÊèêÂá∫Êñ∞ÊÉ≥Ê≥ï„ÄÇ",
                culture: "Â§ßÂùëËàûÁÅ´Èæç",
                cultureDesc: "Â§ßÂùëËàûÁÅ´ÈæçÂÖÖÊªøÊ¥ªÂäõÂíåÊåëÊà∞ÊÄßÔºå‰Ω†ÁöÑÂÜíÈö™Á≤æÁ•ûÂíåÂâµÊñ∞ÊÄùÁ∂≠‰Ωø‰Ω†ËÉΩÂ§†Ê¨£Ë≥û‰∏¶ÂèÉËàáÈÄôÈ†ÖÂÇ≥Áµ±Ê¥ªÂãï„ÄÇ",
                icon: "üî•"
            },
            "ESFJ": {
                name: "Âü∑ÊîøÂÆò",
                description: "‰Ω†ÈóúÂøÉ‰ªñ‰∫∫ÔºåÈáçË¶ñÂÇ≥Áµ±ÂíåÁ§æÊúÉË≤¨‰ªªÔºåÊòØÁ§æÂçÄ‰∏≠ÁöÑÊîØÊü±„ÄÇ",
                culture: "ÂúçÊùëÁõÜËèú",
                cultureDesc: "ÂúçÊùëÁõÜËèúÈ´îÁèæ‰∫ÜÁ§æÂçÄÂúòÁµêÂíåÂÇ≥Áµ±ÂÉπÂÄºÔºå‰Ω†ÁöÑÈóúÊá∑ÁâπË≥™ÂíåÂ∞çÂÇ≥Áµ±ÁöÑÂ∞äÈáç‰Ωø‰Ω†ËÉΩÂ§†Ê∑±ÂàªÈ´îÊúÉÂÖ∂‰∏≠ÁöÑÊñáÂåñÊÑèÁæ©„ÄÇ",
                icon: "üç≤"
            },
            "ESFP": {
                name: "Ë°®ÊºîËÄÖ",
                description: "‰Ω†Ê¥ªÂäõÂõõÂ∞ÑÔºå‰∫´ÂèóÁï∂‰∏ãÔºåÂñúÊ≠°ÊàêÁÇ∫ÈóúÊ≥®ÁöÑÁÑ¶Èªû„ÄÇ",
                culture: "Â§©ÂêéË™ïÈ£ÑËâ≤Â∑°ÈÅä",
                cultureDesc: "Â§©ÂêéË™ïÈ£ÑËâ≤Â∑°ÈÅäÂÖÖÊªøË°®ÊºîÂÖÉÁ¥†ÂíåÊ≠°Ê®ÇÊ∞£Ê∞õÔºå‰Ω†ÁöÑÊ¥ªÂäõÂíåË°®ÊºîÂ§©Ë≥¶‰Ωø‰Ω†ËÉΩÂ§†Âú®ÈÄôÈ†ÖÊ¥ªÂãï‰∏≠ÈñÉËÄÄÂÖâËäí„ÄÇ",
                icon: "üé™"
            },
            "ESTJ": {
                name: "ÁÆ°ÁêÜËÄÖ",
                description: "‰Ω†ÂãôÂØ¶ÂèØÈù†ÔºåÊìÖÈï∑ÁµÑÁπîÂíåÂü∑Ë°åÔºåÈáçË¶ñÁß©Â∫èÂíåÊïàÁéá„ÄÇ",
                culture: "ÂÆ¢ÂÆ∂ËàûÈ∫íÈ∫ü",
                cultureDesc: "ÂÆ¢ÂÆ∂ËàûÈ∫íÈ∫üÈúÄË¶ÅÂö¥Ë¨πÁöÑÁµÑÁπîÂíåÂúòÈöäÂçî‰ΩúÔºå‰Ω†ÁöÑÁÆ°ÁêÜËÉΩÂäõÂíåÂãôÂØ¶‰ΩúÈ¢®‰Ωø‰Ω†ËÉΩÂ§†Âú®ÈÄôÈ†ÖÂÇ≥Áµ±Ê¥ªÂãï‰∏≠ÊâÆÊºîÈáçË¶ÅËßíËâ≤„ÄÇ",
                icon: "üìã"
            },
            "ESTP": {
                name: "‰ºÅÊ•≠ÂÆ∂",
                description: "‰Ω†ÂÖÖÊªøÂÜíÈö™Á≤æÁ•ûÔºåË°åÂãïÂäõÂº∑ÔºåÂñÑÊñºÊääÊè°Ê©üÊúÉ„ÄÇ",
                culture: "ÈæçËàüÁ´∂Ê∏°",
                cultureDesc: "ÈæçËàüÁ´∂Ê∏°ÈúÄË¶ÅÂúòÈöäÂêà‰ΩúÂíåÂº∑Â§ßÁöÑË°åÂãïÂäõÔºå‰Ω†ÁöÑÂÜíÈö™Á≤æÁ•ûÂíåÊûúÊñ∑Ê±∫Á≠ñËÉΩÂäõ‰Ωø‰Ω†ÊàêÁÇ∫ÈæçËàüÈöä‰ºç‰∏≠ÁöÑÈáçË¶Å‰∏ÄÂì°„ÄÇ",
                icon: "üö£"
            },
            "INFJ": {
                name: "ÊèêÂÄ°ËÄÖ",
                description: "‰Ω†ÂØåÊúâÁêÜÊÉ≥‰∏ªÁæ©ÔºåÊ¥ûÂØüÂäõÊ∑±ÔºåÈóúÊ≥®‰∫∫È°ûÁ¶èÁ•âÂíåÁ≤æÁ•ûÊàêÈï∑„ÄÇ",
                culture: "Á≤µÂäá",
                cultureDesc: "Á≤µÂäáËòäÂê´Ë±êÂØåÁöÑÊÉÖÊÑüÂíåÂì≤ÁêÜÔºå‰Ω†ÁöÑÊ∑±Â∫¶ÊÄùËÄÉÂíåÂ∞ç‰∫∫ÊÄßÁöÑÊ¥ûÂØü‰Ωø‰Ω†ËÉΩÂ§†Ê¨£Ë≥û‰∏¶ÁêÜËß£ÈÄôÈñÄËóùË°ìÁöÑÁ≤æÈ´ì„ÄÇ",
                icon: "üé≠"
            },
            "INFP": {
                name: "Ë™øÂÅúËÄÖ",
                description: "‰Ω†ÂØåÊúâË©©ÊÑèÔºåËøΩÊ±ÇÂíåË´ßÔºåÈáçË¶ñÂÄã‰∫∫ÂÉπÂÄºÂíåÂÖßÂøÉÂπ≥Èùú„ÄÇ",
                culture: "Ê∂ºËå∂‰∫åÂçÅÂõõÂë≥",
                cultureDesc: "Ê∂ºËå∂ÊñáÂåñÈ´îÁèæ‰∫Ü‰∏≠ÈÜ´ÁöÑÂπ≥Ë°°Âì≤Â≠∏Ôºå‰Ω†ÁöÑÂíåË´ßËøΩÊ±ÇÂíåÂ∞çÂÖßÂú®Âπ≥ÈùúÁöÑÈáçË¶ñ‰Ωø‰Ω†ËÉΩÂ§†Ê¨£Ë≥ûÈÄôÁ®ÆÂÇ≥Áµ±È§äÁîüÊô∫ÊÖß„ÄÇ",
                icon: "üçµ"
            },
            "INTJ": {
                name: "Âª∫ÁØâÂ∏´",
                description: "‰Ω†ÊìÖÈï∑Êà∞Áï•ÊÄùËÄÉÔºåÁç®Á´ãËá™‰∏ªÔºåËøΩÊ±ÇÁü•Ë≠òÂíåÊïàÁéá„ÄÇ",
                culture: "È¢®Ê∞¥Á†îÁ©∂",
                cultureDesc: "È¢®Ê∞¥Á†îÁ©∂ÈúÄË¶ÅÊ∑±Â∫¶ÊÄùËÄÉÂíåÁ≥ªÁµ±ÂàÜÊûêÔºå‰Ω†ÁöÑÊà∞Áï•ÊÄùÁ∂≠ÂíåÂ∞çÁü•Ë≠òÁöÑËøΩÊ±Ç‰Ωø‰Ω†ËÉΩÂ§†ÁêÜËß£‰∏¶Ê¨£Ë≥ûÈÄôÈñÄÂè§ËÄÅÊô∫ÊÖß„ÄÇ",
                icon: "üß≠"
            },
            "INTP": {
                name: "ÈÇèËºØÂ≠∏ÂÆ∂",
                description: "‰Ω†ÂàÜÊûêÂäõÂº∑ÔºåÁÜ±ÊÑõÁü•Ë≠òÔºåÂñÑÊñºÁôºÁèæÂïèÈ°åÁöÑÊ†∏ÂøÉ„ÄÇ",
                culture: "‰πùÈæçÁöáÂ∏ùÊõ∏Ê≥ï",
                cultureDesc: "‰πùÈæçÁöáÂ∏ùÊõ∏Ê≥ïÂÖÖÊªøÂì≤ÁêÜÂíåÁç®ÁâπË¶ñËßíÔºå‰Ω†ÁöÑÂàÜÊûêËÉΩÂäõÂíåÂ∞çÁü•Ë≠òÁöÑÁÜ±ÊÑõ‰Ωø‰Ω†ËÉΩÂ§†Ê¨£Ë≥ûÂÖ∂‰∏≠ÁöÑÊ∑±Â±§Âê´Áæ©„ÄÇ",
                icon: "‚úíÔ∏è"
            },
            "ISFJ": {
                name: "ÂÆàË≠∑ËÄÖ",
                description: "‰Ω†Âø†Ë™†Á¥∞ÂøÉÔºåÊ®ÇÊñºÊúçÂãô‰ªñ‰∫∫ÔºåÈáçË¶ñÁ©©ÂÆöÂíåÂÇ≥Áµ±„ÄÇ",
                culture: "Êà≤Ê£öÊê≠Âª∫",
                cultureDesc: "Êà≤Ê£öÊê≠Âª∫ÈúÄË¶ÅÁ¥∞ÂøÉÂíåÂúòÈöäÂêà‰ΩúÔºå‰Ω†ÁöÑËÄêÂøÉÂíåÂ∞çÁ¥∞ÁØÄÁöÑÈóúÊ≥®‰Ωø‰Ω†ËÉΩÂ§†Ê¨£Ë≥û‰∏¶ÂèÉËàáÈÄôÈ†ÖÂÇ≥Áµ±Â∑•Ëóù„ÄÇ",
                icon: "üèóÔ∏è"
            },
            "ISFP": {
                name: "ËóùË°ìÂÆ∂",
                description: "‰Ω†ÁæéÂ≠∏ÊïèÊÑüÔºåËá™Áî±ÈùàÈ≠ÇÔºå‰∫´ÂèóÁï∂‰∏ãÁöÑÁæéÂ•Ω„ÄÇ",
                culture: "ÈúìËôπÊãõÁâåÊâãÁπ™",
                cultureDesc: "ÈúìËôπÊãõÁâåÊâãÁπ™ÊòØÈ¶ôÊ∏ØÁç®ÁâπÁöÑË¶ñË¶∫ËóùË°ìÔºå‰Ω†ÁöÑÁæéÂ≠∏ÊïèÊÑüÂíåÂâµÊÑèË°®ÈÅî‰Ωø‰Ω†ËÉΩÂ§†Ê¨£Ë≥û‰∏¶ÂèØËÉΩÂèÉËàáÈÄôÈ†ÖÂÇ≥Áµ±Â∑•Ëóù„ÄÇ",
                icon: "üé®"
            },
            "ISTJ": {
                name: "Áâ©ÊµÅÂ∏´",
                description: "‰Ω†Âö¥Ë¨πÂèØÈù†ÔºåÊ≥®ÈáçÁ¥∞ÁØÄÔºåÂ∞äÈáçÂÇ≥Áµ±ÂíåË¶èÂâá„ÄÇ",
                culture: "ÈªÉÂ§ß‰ªôÁ∞ΩÊñáËß£Âç¶",
                cultureDesc: "ÈªÉÂ§ß‰ªôÁ∞ΩÊñáËß£Âç¶ÈúÄË¶ÅÂö¥Ë¨πÂíåÂ∞çÂÇ≥Áµ±ÁöÑÂ∞äÈáçÔºå‰Ω†ÁöÑÂèØÈù†ÊÄßÂíåÂ∞çÁ¥∞ÁØÄÁöÑÈóúÊ≥®‰Ωø‰Ω†ËÉΩÂ§†ÁêÜËß£‰∏¶Ê¨£Ë≥ûÈÄôÈ†ÖÂÇ≥Áµ±Ê¥ªÂãï„ÄÇ",
                icon: "üîÆ"
            },
            "ISTP": {
                name: "ÈëíË≥ûÂÆ∂",
                description: "‰Ω†ÂãïÊâãËÉΩÂäõÂº∑ÔºåÈùàÊ¥ªÊáâËÆäÔºåÂñÑÊñºËß£Ê±∫ÂØ¶ÈöõÂïèÈ°å„ÄÇ",
                culture: "Ëä±ÁâåÁ¥Æ‰Ωú",
                cultureDesc: "Ëä±ÁâåÁ¥Æ‰ΩúÈúÄË¶ÅÁ≤æÊπõÁöÑÊâãÂ∑•ÊäÄËóùÂíåÂØ¶ÈöõËß£Ê±∫ÂïèÈ°åÁöÑËÉΩÂäõÔºå‰Ω†ÁöÑÂãïÊâãËÉΩÂäõÂíåÈùàÊ¥ªÊÄùÁ∂≠‰Ωø‰Ω†ËÉΩÂ§†Ê¨£Ë≥û‰∏¶Â≠∏ÁøíÈÄôÈñÄÂÇ≥Áµ±Â∑•Ëóù„ÄÇ",
                icon: "üß∂"
            }
        };

        // Quiz questions
        const questions = [
            {
                question: "‰Ω†Â∞±ËÆÄÂì™ÂÄãÂ≠∏ÁßëÔºü",
                options: [
                    { text: "FD-BA", program: "FD-BA" },
                    { text: "FD-ENG", program: "FD-ENG" },
                    { text: "FD-HT", program: "FD-HT" },
                    { text: "HD-BA", program: "HD-BA" },
                    { text: "HD-ENG", program: "HD-ENG" },
                    { text: "HD-HT", program: "HD-HT" }
                ]
            },
            {
                question: "Âú®‰∏ÄÂÄãÈÄ±Êú´Ôºå‰Ω†ÊúÄÊÉ≥ÊÄéÈ∫ºÂ∫¶ÈÅéÔºü",
                options: [
                    { text: "ÂèÉÂä†Á§æ‰∫§Ê¥ªÂãïÔºåË™çË≠òÊñ∞ÊúãÂèã", scores: { E: 2, S: 0, T: 0, J: 0 } },
                    { text: "ËàáÂπæÂÄãÂ•ΩÂèãÂÖ±Â∫¶ÊÇ†ÈñíÊôÇÂÖâ", scores: { I: 1, S: 1, F: 1, P: 0 } },
                    { text: "Áç®Ëá™Êé¢Á¥¢‰∏ÄÂÄãÊñ∞Âú∞Êñπ", scores: { I: 2, N: 1, T: 0, P: 1 } },
                    { text: "Âú®ÂÆ∂Á†îÁ©∂‰∏ÄÂÄãÊúâË∂£ÁöÑ‰∏ªÈ°å", scores: { I: 2, N: 1, T: 1, J: 0 } }
                ]
            },
            {
                question: "Èù¢Â∞çÂúòÈ´îÈ†ÖÁõÆÔºå‰Ω†ÈÄöÂ∏∏ÊúÉÔºö",
                options: [
                    { text: "‰∏ªÂãïÈ†òÂ∞éÔºåÂàÜÈÖç‰ªªÂãô", scores: { E: 1, S: 0, T: 1, J: 2 } },
                    { text: "Êèê‰æõÂâµÊÑèÊÉ≥Ê≥ïÂíåÈùàÊÑü", scores: { E: 0, N: 2, T: 0, P: 1 } },
                    { text: "Á¢∫‰øùÂúòÈöäÊ∞£Ê∞õÂíåË´ß", scores: { I: 0, S: 1, F: 2, J: 0 } },
                    { text: "Â∞àÊ≥®ÂÆåÊàêËá™Â∑±ÁöÑÈÉ®ÂàÜ", scores: { I: 1, S: 1, T: 1, J: 1 } }
                ]
            },
            {
                question: "Áï∂‰Ω†ÈúÄË¶ÅÂÅöÊ±∫ÂÆöÊôÇÔºå‰Ω†Êõ¥ÂÇæÂêëÊñºÔºö",
                options: [
                    { text: "ÂàÜÊûêÂà©ÂºäÔºåÁêÜÊÄßÂà§Êñ∑", scores: { I: 0, S: 0, T: 2, J: 1 } },
                    { text: "ËÄÉÊÖÆÂ∞ç‰∫∫ÁöÑÂΩ±ÈüøÂíåÊÑüÂèó", scores: { E: 0, S: 0, F: 2, J: 0 } },
                    { text: "Áõ∏‰ø°Áõ¥Ë¶∫ÔºåÈÅ∏ÊìáÊÑüË¶∫Â∞çÁöÑ", scores: { I: 0, N: 1, F: 1, P: 2 } },
                    { text: "Êî∂ÈõÜË∂≥Â§†Ë≥áË®äÂÜçÊ±∫ÂÆö", scores: { I: 1, S: 1, T: 1, J: 1 } }
                ]
            },
            {
                question: "Âú®ÂÇ≥Áµ±ÁØÄÊÖ∂‰∏≠Ôºå‰Ω†ÊúÄË¢´‰ªÄÈ∫ºÂê∏ÂºïÔºü",
                options: [
                    { text: "ÁÜ±È¨ßÁöÑÊ∞£Ê∞õÂíå‰∫∫Áæ§", scores: { E: 2, S: 1, F: 1, P: 0 } },
                    { text: "ËÉåÂæåÁöÑÊ≠∑Âè≤ÂíåÊñáÂåñÊÑèÁæ©", scores: { I: 1, N: 2, T: 1, J: 0 } },
                    { text: "Á≤æÁ∑ªÁöÑÊâãÂ∑•ËóùÂíåÊäÄË°ì", scores: { I: 1, S: 1, T: 1, J: 1 } },
                    { text: "ËàáË¶™ÂèãÂÖ±Â∫¶ÁöÑÊ∫´È¶®ÊôÇÂàª", scores: { E: 1, S: 1, F: 2, J: 0 } }
                ]
            },
            {
                question: "Â¶ÇÊûú‰Ω†Êúâ‰∏ÄÊï¥Â§©Ëá™Áî±ÊôÇÈñìÔºå‰Ω†ÊúÉÔºö",
                options: [
                    { text: "ÊåâË®àÂäÉÂèÉËßÄËëóÂêçÊôØÈªû", scores: { E: 1, S: 1, T: 0, J: 2 } },
                    { text: "Èö®ÊÑèÊº´Ê≠•ÔºåÁôºÁèæÈö±ËóèËßíËêΩ", scores: { I: 1, N: 1, F: 0, P: 2 } },
                    { text: "ÂèÉÂä†Áï∂Âú∞Â∑•‰ΩúÂùäÂ≠∏ÁøíÊñ∞ÊäÄËÉΩ", scores: { E: 0, S: 1, T: 1, J: 1 } },
                    { text: "Â∞ãÊâæÁâπËâ≤ÁæéÈ£üÂíåÊñáÂåñÈ´îÈ©ó", scores: { E: 1, N: 1, F: 1, P: 1 } }
                ]
            }
        ];

        // Variables to track quiz state
        let currentQuestion = 0;
        let userScores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
        let userAnswers = [];
        let userProgram = "";
        let userMbtiType = "";

        // DOM Elements
        const titleSection = document.getElementById('title-section');
        const quizSection = document.getElementById('quiz-section');
        const resultsSection = document.getElementById('results-section');
        const startBtn = document.getElementById('start-btn');
        const questionNumber = document.getElementById('question-number');
        const progressText = document.getElementById('progress-text');
        const progressBar = document.querySelector('.progress');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const shareBtn = document.getElementById('share-btn');
        const copyTooltip = document.getElementById('copy-tooltip');
        const hiddenForm = document.getElementById('hidden-form');
        const googleForm = document.getElementById('google-form');

        // Event Listeners
        startBtn.addEventListener('click', startQuiz);
        prevBtn.addEventListener('click', showPreviousQuestion);
        nextBtn.addEventListener('click', handleNextButton);
        restartBtn.addEventListener('click', restartQuiz);
        shareBtn.addEventListener('click', copyUrlToClipboard);

        // Functions
        function startQuiz() {
            titleSection.classList.add('hidden');
            quizSection.classList.remove('hidden');
            showQuestion(0);
        }

        function showQuestion(index) {
            currentQuestion = index;
            
            // Update question number and progress
            questionNumber.textContent = `ÂïèÈ°å ${index + 1}/6`;
            const progress = ((index + 1) / questions.length) * 100;
            progressText.textContent = `${progress.toFixed(1)}%`;
            progressBar.style.width = `${progress}%`;
            
            // Show/hide prev button
            if (index === 0) {
                prevBtn.classList.add('hidden');
            } else {
                prevBtn.classList.remove('hidden');
            }
            
            // Update next button text
            if (index === questions.length - 1) {
                nextBtn.textContent = 'Êü•ÁúãÁµêÊûú';
            } else {
                nextBtn.textContent = '‰∏ã‰∏ÄÈ°å';
            }
            
            // Display question and options
            const question = questions[index];
            questionText.textContent = question.question;
            
            optionsContainer.innerHTML = '';
            
            // Adjust grid for program question (first question)
            if (index === 0) {
                optionsContainer.className = 'grid grid-cols-2 md:grid-cols-3 gap-4';
            } else {
                optionsContainer.className = 'grid grid-cols-1 md:grid-cols-2 gap-4';
            }
            
            question.options.forEach((option, optionIndex) => {
                const optionCard = document.createElement('div');
                optionCard.className = 'option-card p-4 rounded-lg bg-white cursor-pointer';
                if (userAnswers[index] === optionIndex) {
                    optionCard.classList.add('selected');
                }
                
                optionCard.innerHTML = `
                    <div class="flex items-center">
                        <div class="w-6 h-6 rounded-full border-2 border-red-400 flex items-center justify-center mr-3">
                            ${userAnswers[index] === optionIndex ? '<div class="w-3 h-3 bg-red-500 rounded-full"></div>' : ''}
                        </div>
                        <span>${option.text}</span>
                    </div>
                `;
                
                optionCard.addEventListener('click', () => selectOption(optionIndex));
                optionsContainer.appendChild(optionCard);
            });
        }

        function selectOption(optionIndex) {
            userAnswers[currentQuestion] = optionIndex;
            
            // If this is the first question (program selection), store the program
            if (currentQuestion === 0) {
                userProgram = questions[0].options[optionIndex].program;
            }
            
            // Update selected option visually
            const options = optionsContainer.querySelectorAll('.option-card');
            options.forEach((option, index) => {
                const radioCircle = option.querySelector('.w-6');
                if (index === optionIndex) {
                    option.classList.add('selected');
                    radioCircle.innerHTML = '<div class="w-3 h-3 bg-red-500 rounded-full"></div>';
                } else {
                    option.classList.remove('selected');
                    radioCircle.innerHTML = '';
                }
            });
        }

        function showPreviousQuestion() {
            if (currentQuestion > 0) {
                showQuestion(currentQuestion - 1);
            }
        }

        function handleNextButton() {
            // If no option selected, prompt user
            if (userAnswers[currentQuestion] === undefined) {
                alert('Ë´ãÈÅ∏Êìá‰∏ÄÂÄãÈÅ∏È†ÖÂÜçÁπºÁ∫å');
                return;
            }
            
            // If last question, calculate results
            if (currentQuestion === questions.length - 1) {
                calculateResults();
                return;
            }
            
            // Otherwise show next question
            showQuestion(currentQuestion + 1);
        }

        function calculateResults() {
            // Reset scores
            userScores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            
            // Calculate scores based on answers (skip first question which is about program)
            for (let i = 1; i < userAnswers.length; i++) {
                const answerIndex = userAnswers[i];
                const selectedOption = questions[i].options[answerIndex];
                for (const [trait, score] of Object.entries(selectedOption.scores)) {
                    userScores[trait] += score;
                }
            }
            
            // Determine MBTI type
            userMbtiType = [
                userScores.E > userScores.I ? 'E' : 'I',
                userScores.S > userScores.N ? 'S' : 'N',
                userScores.T > userScores.F ? 'T' : 'F',
                userScores.J > userScores.P ? 'J' : 'P'
            ].join('');
            
            // Submit data to both forms before showing results
            submitDataToForms(userProgram, userMbtiType);
            
            showResults(userMbtiType);
        }

        function submitDataToForms(program, mbtiType) {
            const timestamp = new Date().toISOString();
            
            // Fill in the FormSubmit form fields
            document.getElementById('form-program').value = program;
            document.getElementById('form-mbti').value = mbtiType;
            document.getElementById('form-timestamp').value = timestamp;
            
            // Fill in the Google Form fields
            document.getElementById('google-form-program').value = program;
            document.getElementById('google-form-mbti').value = mbtiType;
            document.getElementById('google-form-timestamp').value = timestamp;
            
            // Submit to Google Form first (silently in the background)
            submitToGoogleForm();
            
            // Then submit to FormSubmit (this might redirect the page)
            hiddenForm.submit();
        }

        function submitToGoogleForm() {
            try {
                // Create a temporary iframe to submit the Google Form without redirecting
                const iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                iframe.name = 'google-form-target';
                document.body.appendChild(iframe);
                
                // Set the target of the form to the iframe
                googleForm.target = 'google-form-target';
                
                // Submit the form
                googleForm.submit();
                
                // Remove the iframe after a delay
                setTimeout(() => {
                    document.body.removeChild(iframe);
                }, 5000);
                
                console.log('Data submitted to Google Form successfully');
            } catch (error) {
                console.error('Error submitting to Google Form:', error);
            }
        }

        function showResults(mbtiType) {
            quizSection.classList.add('hidden');
            resultsSection.classList.remove('hidden');
            
            const mbtiInfo = mbtiData[mbtiType];
            
            document.getElementById('mbti-type').textContent = mbtiType;
            document.getElementById('mbti-name').textContent = mbtiInfo.name;
            document.getElementById('mbti-description').textContent = mbtiInfo.description;
            document.getElementById('culture-name').textContent = mbtiInfo.culture;
            document.getElementById('culture-description').textContent = mbtiInfo.cultureDesc;
            document.getElementById('result-icon').textContent = mbtiInfo.icon;
            
            // Create confetti effect
            createConfetti();
        }

        function createConfetti() {
            const confettiColors = ['#ff6b6b', '#ffb8b8', '#ffd8d8', '#ff9e9e', '#ffecec'];
            const container = document.querySelector('body');
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = confettiColors[Math.floor(Math.random() * confettiColors.length)];
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = -10 + 'px';
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.opacity = '1';
                
                container.appendChild(confetti);
                
                const duration = Math.random() * 3 + 2;
                const rotation = Math.random() * 360;
                
                confetti.animate([
                    { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                    { transform: `translateY(100vh) rotate(${rotation}deg)`, opacity: 0 }
                ], {
                    duration: duration * 1000,
                    easing: 'ease-out',
                    fill: 'forwards'
                });
                
                setTimeout(() => {
                    confetti.remove();
                }, duration * 1000);
            }
        }

        function restartQuiz() {
            currentQuestion = 0;
            userAnswers = [];
            userProgram = "";
            userMbtiType = "";
            resultsSection.classList.add('hidden');
            titleSection.classList.remove('hidden');
        }
        
        function copyUrlToClipboard() {
            // Create a URL with the MBTI result as a parameter
            const baseUrl = window.location.href.split('?')[0];
            const shareUrl = `${baseUrl}?mbti=${userMbtiType}&program=${userProgram}`;
            
            // Copy to clipboard
            navigator.clipboard.writeText(shareUrl).then(() => {
                // Show tooltip
                copyTooltip.style.opacity = '1';
                
                // Hide tooltip after 2 seconds
                setTimeout(() => {
                    copyTooltip.style.opacity = '0';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
                alert('ÁÑ°Ê≥ïË§áË£ΩÁ∂≤ÂùÄÔºåË´ãÊâãÂãïË§áË£ΩÁÄèË¶ΩÂô®Âú∞ÂùÄÊ¨Ñ„ÄÇ');
            });
        }
        
        // Check if there's a result in the URL (for when someone opens a shared link)
        window.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const mbtiParam = urlParams.get('mbti');
            const programParam = urlParams.get('program');
            
            if (mbtiParam && mbtiData[mbtiParam]) {
                userMbtiType = mbtiParam;
                userProgram = programParam || "";
                showResults(mbtiParam);
            }
        });
    </script>
</body>
</html>
